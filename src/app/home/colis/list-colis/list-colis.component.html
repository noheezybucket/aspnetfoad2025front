<div>
  <div class="mb-2 flex justify-between">
    <input
           type="text"
           placeholder="Rechercher par code, nom, adresse, statut..."
           class="border border-gray-300 rounded-lg px-4 py-2 w-96 focus:outline-none focus:ring-2 focus:ring-blue-500"
           [(ngModel)]="searchTerm"
           (input)="onSearch()"
    />
    <a routerLink="/colis/create" class="btn-primary w-fit p-2 gap-2">
      Ajouter un colis <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus-icon lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg></a>
  </div>
  <div class="rounded-xl overflow-hidden overflow-y-scroll h-[80vh]">
    <table>
      <thead>
      <tr>
        <th>ID</th>
        <th>Code</th>
        <th>Nom complet</th>
        <th>Depart</th>
        <th>Arrivée</th>
        <th>Description</th>
        <th>Poids</th>
        <th>Livraison</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      @if (!loading) {
        @for (colis of filteredColisData ; track colis.idColis) {
          <tr>
            <td>{{colis.idColis}}</td>
            <td>{{colis.codeColis}}</td>
            <td>{{colis.prenomclient}} {{colis.nomclient}}</td>
            <td>{{colis.adresseDepart}}</td>
            <td>{{colis.adresseArrivee}}</td>
            <td>{{colis.description}}</td>
            <td>{{colis.poids}}</td>
            <td>
              @if (colis.statutLivraison === "Livré") {
                <span class="bg-green-500 p-1 rounded text-white">{{colis.statutLivraison}}</span>
              } @else if (colis.statutLivraison === "En cours") {
                <span class="bg-orange-500 p-1 rounded text-white">{{colis.statutLivraison}}</span>
              } @else {
              <span class="bg-red-500 p-1 rounded text-white">{{colis.statutLivraison}}</span>
              }
            </td>
            <td>
              <div class="flex justify-center gap-2">
                @if (colis.statutLivraison !== "Livré") {
                  <a routerLink="" class="btn-edit"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bolt-icon lucide-bolt"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><circle cx="12" cy="12" r="4"/></svg></a>
                } @else {

                  -
                }
              </div>
            </td>
          </tr>

        } @empty {
          <td colspan="9" class="text-center">
            @if (searchTerm) {
              Aucun résultat trouvé pour "{{searchTerm}}"
            } @else {
              Aucun élément trouvé
            }
          </td>
        }
      } @else {
        <td colspan="9" class="text-center p-2">
          <app-loading-spinner/>
        </td>
      }
      </tbody>

    </table>
  </div>

</div>
